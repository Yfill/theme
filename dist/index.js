!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).Theme=n()}(this,(function(){"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function o(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function i(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?o(Object(e),!0).forEach((function(n){r(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function a(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&u(t,n)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,n){return(u=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function l(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=c(t);if(n){var o=c(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return l(this,e)}}function f(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return e}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return h(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return h(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var p="light",m="dark",d=p,v=m,y="main",b="default",g="mounted",x="unmounted",k=[d,v,y],S=function(t,n){for(var e=t.length,r=0;r<e;r+=1)if(t[r]===n)return!0;return!1},w=function(t,n,e,r){return n.reduce((function(n,o){var i=t;e&&(i=function(t,n){return!t||S([d,v],t)?n:n.map((function(n){var e=f(n,2);return[e[0],e[1].map((function(n){return"".concat(n,"-").concat(t)}))]}))}(e,i));var a=f(o,2),c=a[0],u=a[1],l=[b,"hover"];return"".concat(n).concat(i.reduce((function(t,n){var e=f(n,2),o=e[0],i=e[1];return t+l.reduce((function(t,n){var e=n===b;return"".concat(t).concat(i.map((function(t){return"[".concat(r?"".concat(r,"-"):"").concat(t,"-").concat(c).concat(e?"":"-".concat(n),"]").concat(e?"":":".concat(n))})).join(","),"{").concat(o,":").concat(u).concat(e?"":" !important",";}")}),"")}),""))}),"")},I=function t(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return r.length>=n.length?n.apply(void 0,r):function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return t.apply(void 0,[n].concat(r,o))}},O=function(t){if(!t)throw new TypeError("The color value cannot be empty");if(!/^\#?[0-9A-F]{6}$/.test("".concat(t).toUpperCase()))throw new TypeError("The color value(".concat(t,") needs to be a hex value"))},M=function(t){return O(t),(t.replace("#","").match(/../g)||[]).map((function(t){return parseInt(t,16)}))},j=function(t){return Math.max(0,Math.min(255,t))},P=function(t,n,e){var r=/^\d{1,3}$/;if(!r.test("".concat(t))||!r.test("".concat(n))||!r.test("".concat(e)))throw new TypeError("rgb error");var o=[t.toString(16),n.toString(16),e.toString(16)];return"#".concat(o.map((function(t){return 1===t.length?"0".concat(t):t})).join(""))},T=function(t,n,e){return M(t).map((function(t){return j(e?Math.round((255-t)*n+t):Math.round(t*(1-n)))}))},C=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];O(t);var r=Math.max(0,Math.min(1,Math.abs(n))),o=n>=0,i=T(t,r,o);return e?o?"rgba(".concat(M(t).join(","),",").concat((1-r).toFixed(3),")"):"rgba(".concat(i.map((function(t){return j(Math.round((255-t/r)/(1-1/r)))})).join(","),",").concat((1-r).toFixed(3),")"):P(i[0],i[1],i[2])},E=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return C(t,-n,e)},z=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return C(t,n,e)},A=function(t,n,e,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=(n||[])[o];return a||(e===v?z(t,o/r,i):e===d?E(t,o/r,i):z(t,o/r,i))},L=function(t,n){return t},F=function(t,n){return S([d,v],n)?n===v?z(t,.09):E(t,.09):t},_=function(t,n){return S([d,v],n)?n===v?z(t,.65):E(t,.65):t},G=function(t){return t.reduce((function(t,n){var e=f(n,2),r=e[0],o=e[1].map((function(t){return[t,r]}));return t.concat(o)}),[])},D=function n(e){t(this,n);var r=I(A,e.color,e.colorGroup,e.mark,e.maxLevel);this.mark=e.mark,this.prefix=e.prefix,this.colorTupleList=G(n.getValueNames(r,e.maxLevel))};D.getValueNames=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Array.apply(null,Array(n+1)).reduce((function(n,e,r){return n.concat([!1,!0].map((function(n){return[t(r,n),["".concat(r).concat(n?"-a":"")]]}))).concat(0===r?[]:[!1,!0].map((function(n){return[t(-r,n),["".concat(-r).concat(n?"-a":"")]]})))}),[])};var R=function(n){a(o,n);var r=s(o);function o(){return t(this,o),r.apply(this,arguments)}return e(o,[{key:"exportStyle",value:function(){return w(o.colorPropMark,this.colorTupleList,this.mark,this.prefix)}}]),o}(D);R.colorPropMark=[["background-color",["bgc","background-color"]]];var $=function(n){a(o,n);var r=s(o);function o(){return t(this,o),r.apply(this,arguments)}return e(o,[{key:"exportStyle",value:function(){return w(o.colorPropMarks,this.colorTupleList,this.mark,this.prefix)}}]),o}(D);$.colorPropMarks=[["border-color",["bc","border-color"]],["border-top-color",["btc","border-top-color"]],["border-bottom-color",["bbc","border-bottom-color"]],["border-left-color",["blc","border-left-color"]],["border-right-color",["brc","border-right-color"]]];var q=function(n){a(o,n);var r=s(o);function o(n){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:52;t(this,o),e=r.call(this,n);var c=parseInt(window.getComputedStyle(document.documentElement).fontSize,10),u=Math.max(12,i),l=Math.max(Math.max(12,a),u),s=Array.apply(null,Array(l-u+1)).map((function(){return u})).map((function(t,n){return t+n})).map((function(t){return["".concat(t/c,"rem"),["".concat(t)]]}));return e.sizeTupleList=G(s),e}return e(o,[{key:"exportStyle",value:function(){return(S([d,v],this.mark)?w(o.sizePropMarks,this.sizeTupleList,this.mark,this.prefix):"")+w(o.colorPropMarks,this.colorTupleList,this.mark,this.prefix)}}]),o}(D);q.colorPropMarks=[["color",["fc","font-color"]]],q.sizePropMarks=[["font-size",["fs","font-size"]]];var N=function(n){a(o,n);var r=s(o);function o(n){var e;t(this,o),e=r.call(this,n);var i=I((function(t){return C(S([v,d],e.mark)?"#000000":C(n.color,-.16),t,!0)})),a=["0 1px 2px -2px ".concat(i(.84),",0 3px 6px 0 ").concat(i(.88),",0 5px 12px 4px ").concat(i(.91)),"0 3px 6px -4px ".concat(i(.88),",0 6px 16px 0 ").concat(i(.92),",0 9px 28px 8px ").concat(i(.95)),"0 6px 16px -8px ".concat(i(.92),",0 9px 28px 0 ").concat(i(.95),",0 12px 48px 16px ").concat(i(.97))].map((function(t,n){return[t,["".concat(n)]]}));return e.shadowTupleList=G(a),e}return e(o,[{key:"exportStyle",value:function(){return w(o.shadowPropMarks,this.shadowTupleList,this.mark,this.prefix)}}]),o}(D);N.shadowPropMarks=[["box-shadow",["bs","box-shadow"]]];var U=function(t,n){return{id:n,init:function(){var e=document.head;if(!e.querySelector('[theme-item="'.concat(n,'"]'))){var r,o=((r=document.createElement("style")).innerText=t.exportStyle(),r.setAttribute("theme-item",n),r);t.addEvent&&t.addEvent(),e.appendChild(o)}},destroy:function(){var e=document.head,r=e.querySelector('[theme-item="'.concat(n,'"]'));t.removeEvent&&t.removeEvent(),r&&e.removeChild(r)}}},V=function(t,n){return t?"theme-".concat(n,"-").concat(t):"theme-".concat(n)},Z=function(t,n){var e=t.color,r=t.backgroundColor,o=t.borderColor,a=t.fontColor,c=t.backgroundColorGroup,u=t.borderColorGroup,l=t.fontColorGroup,s=t.mark,f={maxLevel:n.maxLevel,prefix:n.prefix,mark:s},h=I(V,s),p=[U(new R(i(i({},f),{},{color:r||L(e),colorGroup:c})),h("background")),U(new $(i(i({},f),{},{color:o||F(e,s),colorGroup:u})),h("border")),U(new q(i(i({},f),{},{color:a||_(e,s),colorGroup:l}),n.minFontSize,n.maxFontSize),h("font")),U(new N(i(i({},f),{},{color:e})),h("shadow"))];return{mount:function(){p.forEach((function(t){return t.init()}))},umount:function(){p.forEach((function(t){return t.destroy()}))}}},B="#ffffff",H={color:B,mark:p,backgroundColor:L(B),borderColor:F(B,p),fontColor:_(B,p)},J="#191919",K={color:J,mark:m,backgroundColor:L(J),borderColor:F(J,m),fontColor:_(J,m)},Q="#1890ff",W={color:Q,mark:y,backgroundColor:L(Q),borderColor:F(Q,y),fontColor:_(Q,y)},X=function(t){var n=[];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(t[e]);return n},Y=function(){function n(e){t(this,n),this.lightStyleInstance=null,this.darkStyleInstance=null,this.mainStyleInstance=null,this.otherStyleInstanceMap={},this.mode=p,this.status="notMounted",this.commonThemeOpt={prefix:""};var r=e||{lightOpt:H,darkOpt:K,mainOpt:W,mode:p,prefix:"",minFontSize:12,maxFontSize:52,maxLevel:10},o=r.lightOpt,a=void 0===o?H:o,c=r.darkOpt,u=void 0===c?K:c,l=r.mainOpt,s=void 0===l?W:l,f=r.mode,h=void 0===f?p:f,m=r.prefix,b=void 0===m?"":m,g=r.minFontSize,x=void 0===g?12:g,k=r.maxFontSize,S=void 0===k?52:k,w=r.maxLevel,I=void 0===w?10:w;if(window.themeInstance)return window.themeInstance;b&&!/^[a-zA-Z]/.test("".concat(b))&&console.warn("The prefix must start with a letter"),this.commonThemeOpt={prefix:b,minFontSize:x,maxFontSize:S,maxLevel:I},this.mode=h;var O=this.commonThemeOpt;this.lightStyleInstance=Z(i(i(i({},H),a),{},{mark:d}),O),this.darkStyleInstance=Z(i(i(i({},K),u),{},{mark:v}),O),this.mainStyleInstance=Z(i(i(i({},W),s),{},{mark:y}),O),n.themeInstance=this,window.themeInstance=this}return e(n,[{key:"mount",value:function(){var t,n,e;return this.status===g||(this.mode===p?null===(t=this.lightStyleInstance)||void 0===t||t.mount():this.mode===m&&(null===(n=this.darkStyleInstance)||void 0===n||n.mount()),null===(e=this.mainStyleInstance)||void 0===e||e.mount(),X(this.otherStyleInstanceMap).forEach((function(t){return t.mount()})),this.status=g),this}},{key:"umount",value:function(){var t,n,e;return this.status===x||(this.mode===p?null===(t=this.lightStyleInstance)||void 0===t||t.umount():this.mode===m&&(null===(n=this.darkStyleInstance)||void 0===n||n.umount()),null===(e=this.mainStyleInstance)||void 0===e||e.umount(),X(this.otherStyleInstanceMap).forEach((function(t){return t.umount()})),this.status=x),this}},{key:"add",value:function(t){var n=t.mark;if(!n||S(k,n))return this;var e=Z(t,this.commonThemeOpt);return e.mount(),this.otherStyleInstanceMap[n]=e,this}},{key:"remove",value:function(t){if(t){var n=this.otherStyleInstanceMap[t];null==n||n.umount(),delete this.otherStyleInstanceMap[t]}return this}},{key:"update",value:function(t){var n=t.mark;if(!S(k,n)&&!this.otherStyleInstanceMap[n])return this;var e,r,o=Z(t,this.commonThemeOpt);if(n===d)null===(e=this.lightStyleInstance)||void 0===e||e.umount(),this.lightStyleInstance=o,this.mode===p&&(null===(r=this.lightStyleInstance)||void 0===r||r.mount());else if(n===v){var i,a;null===(i=this.darkStyleInstance)||void 0===i||i.umount(),this.darkStyleInstance=o,this.mode===m&&(null===(a=this.darkStyleInstance)||void 0===a||a.mount())}else if(n===y){var c,u;null===(c=this.mainStyleInstance)||void 0===c||c.umount(),this.mainStyleInstance=o,null===(u=this.mainStyleInstance)||void 0===u||u.mount()}else{var l,s;null===(l=this.otherStyleInstanceMap[n])||void 0===l||l.umount(),this.otherStyleInstanceMap[n]=o,null===(s=this.otherStyleInstanceMap[n])||void 0===s||s.mount()}return this}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mode===p?m:p;return t===this.mode||(this.umount(),this.mode=t,this.mount()),this}}],[{key:"run",value:function(t){return new n(t).mount()}},{key:"mount",value:function(){var t;return null===(t=n.themeInstance)||void 0===t?void 0:t.mount()}},{key:"umount",value:function(){var t;return null===(t=n.themeInstance)||void 0===t?void 0:t.umount()}},{key:"add",value:function(t){var e;return null===(e=n.themeInstance)||void 0===e?void 0:e.add(t)}},{key:"remove",value:function(t){var e;return null===(e=n.themeInstance)||void 0===e?void 0:e.remove(t)}},{key:"update",value:function(t){var e;return null===(e=n.themeInstance)||void 0===e?void 0:e.update(t)}},{key:"change",value:function(t){var e;return null===(e=n.themeInstance)||void 0===e?void 0:e.change(t)}}]),n}();return Y.themeInstance=null,Y}));
